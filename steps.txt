python -m venv labenv

# On mac
source ./labenv/bin/activate
pip install -r requirements.txt openai
pip install fastapi uvicorn python-dotenv openai


# to run the api 
uvicorn app:app --host 0.0.0.0 --port 8000

on the browser 
http://127.0.0.1:8000/docs


# to subscribe whatsapp
curl -i -X POST \
  https://graph.facebook.com/v22.0/<WHATSAPP_BUSINESS_ID>/subscribed_apps \
  -H 'Authorization: Bearer <TOKEN>' \
  -H 'Content-Type: application/json' \
  -d '{ "subscribed_fields": ["messages","message_deliveries","message_reads"] }'

# DOCKER IMAGE---------------
https://www.youtube.com/watch?v=HyCO6nMdxC0
# to build the docker image

docker build -t rag-fastapi .
docker run -p 8000:8000 rag-fastapi

run this:
http://localhost:8000/docs


# On Azure 
Create the container registry
from access keys get the login_server, username, and password

# On terminal, on the root 
docker login <login_server> -u <username> -p <password>

# building forcing amd64:
docker buildx build --platform linux/amd64 -t <login_server>/spfastapi:build-tag-1 .

docker push <login_server>/spfastapi:build-tag-1

# On Azure
Services > Repositories , and you will see spfastapi

# now that we have our image stored, we can create an instanse of it
whichin the resource group, search contanier instances 



contanierregistrysp.azurecr.io





docker buildx build --platform linux/amd64 -t contanierregistrysp.azurecr.io/spfastapi:build-tag-1 .

docker push contanierregistrysp.azurecr.io/spfastapi:build-tag-1


curl "http://132.196.178.159/webhook?hub.mode=subscribe&hub.verify_token=s3cret123&hub.challenge=12345"


# I used this video to create the web app 
https://www.youtube.com/watch?v=Rd1LlNQZWko

docker buildx build --platform linux/amd64 -t contaregistrysp.azurecr.io/spfastapi:build-tag-1 .
docker push contaregistrysp.azurecr.io/spfastapi:build-tag-1


